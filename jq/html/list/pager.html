<!doctype html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>pager</title>
    <link rel="stylesheet" href="../../../css/base.css">
    <link rel="stylesheet" href="../../../css/pre.css">
    <link rel="stylesheet" href="../../css/pager.css">
    <script src="../../../js/jquery-1.11.1.min.js"></script>
    <script src="../../js/page.js"></script>


</head>
<body>

<div class="pre-view">
    <h1>分页pager</h1>
    <h3>使用方式：</h3>
    <div>
        <pre lang="javascript">
        let pager = new Page($(".xui-pages"));
        var option={
            prefixCount: 2
        };
        pager.config(option);
        pager.post("../../json/list.json", {}, function (res, opts) {
            opts.listCount = res.count;     //重新赋值list总条数
            //执行绑定逻辑
            //...
        })
        </pre>
    </div>
    <h3>示例：</h3>
    <div class="pre-box" contenteditable="true">
        <pre>
        option = {
            url: "../../json/list.json",
            numCount: 5,        //中间显示的数子个数
            prefixCount: 2,     //省略号前后显示的个数
            pageIndex: 1,
            pageSize: 10,
            data: {},           //ajax data参数
            loading: null,      //loading 开始执行函数
            loadTime: 300,      //ajax请求300ms后执行loading函数
            closeLoading: null, //loading 结束执行函数
            success: function(res){     //ajax成功执行函数
                this.listCount = res.count;     ////重新赋值list总条数
                //执行绑定逻辑
                //...
            },
            method: "post",
            dataType: "json",   //传入数据格式  默认为json 可设置为string
            error: null         ////ajax请求出错执行函数
        }
        </pre>
    </div>

    <div class="btn-list">
        <button class="apply-opt">执行</button>
    </div>
    <div style="text-align: center;margin-bottom: 20px;">
        <div class="xui-pages">
            <a class="prev"><em><</em>上一页</a>
            <span class="pageNum">
                <a class="active">1</a><a>2</a><a>3</a><a>4</a><a>5</a>
                </span>
            <a class="next">下一页<em>></em></a>
        </div>
    </div>
    <h3>Page对象：</h3>
    <div class="table-box">
        pageShow: false,
        size: 10,
        index: 1,
        count: 0,
        list: {}
        <p><span>info(object)：</span><label>分页信息 --- pageShow:分页显示状态 size:每页条数 index:当前页码 count:总条数</label></p>
        <p><span>config(function)：</span><label></label></p>
        <p><span>post(function)：</span><label></label></p>
        <p><span>reset(function)：</span><label></label></p>
        <p><span>update(function)：</span><label></label></p>
    </div>

</div>
<script>
    $(function () {
        $(".apply-opt").on("click", function () {
            eval($(".pre-box").text());
            applyPage();
        })
    });
    /*分页*/
    let pager = new Page($(".xui-pages"));
    let option = {prefixCount:2};
    pager.config(option);
    pager.post("../../json/list.json", { }, function (res) {
        this.listCount = res.count;
    });
    function applyPage() {
        pager.config(option);
        pager.update();
    }




</script>
</body>
</html>