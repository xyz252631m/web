<!doctype html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>select</title>
    <link rel="stylesheet" href="../../../css/base.css">
    <link rel="stylesheet" href="../../../css/pre.css">
    <link rel="stylesheet" href="../../css/xui-select.css">
    <script src="../../../js/jquery-1.11.1.min.js"></script>
    <script src="../../js/xui-select.js"></script>
    <script src="../../../js/address/city-list.js"></script>
</head>
<body>
<div class="pre-view">
    <h1>自定义select</h1>
    <h3>使用方式：</h3>
    <div class="use-box">
        <span class="pre-tab">
            <a class="active">js</a><a>css</a><a>less</a><a>html</a>
        </span>
        <div class="tab-main">
            <xmp class="active">
                let mSelect = $(".m-select-1").selectToggle(
                {
                id: "id", // 列表key
                text: "text", // 列表val
                list: [{id: -1, text: "---请选择---"}, {id: 1, text: "男"}, {id: 0, text: "女"}],
                selectItem: {}, // 选中项(item)
                click: function (item) {
                //console.log(item, privoce.getSelectItem())
                //点击执行逻辑
                //...
                }
                }
                );
            </xmp>
            <xmp>
                .xui-label-select{ display: inline-block; cursor: pointer; height: 32px; line-height: 32px; border:
                #d0d0d0 solid 1px; vertical-align: middle; width: 148px; position: relative; text-align: left;
                white-space: nowrap;}
                .xui-label-select .s-unit{ float: right; padding: 0 10px; height: 32px; line-height: 32px; border-left:
                #e9e9e9 solid 1px; text-align: center;}
                .xui-label-select i{ width: 7px; height: 4px; float: right; background: url('../images/icon_01.png') 0 0
                no-repeat; margin-top: 14px; margin-right: 12px;}
                .xui-label-select span{ color: #333333; margin-left: 20px; display: inline-block; text-overflow:
                ellipsis; overflow: hidden; white-space: nowrap;}
                .xui-label-select a{ display: none; line-height: 32px; max-height: 192px; overflow-y: scroll; width:
                100%; position: absolute; top: 32px; left: -1px; border: #d0d0d0 solid 1px; background-color: white;}
                .xui-label-select a:hover{ color: #333;}
                .xui-label-select a::-webkit-scrollbar{ width: 2px;}
                .xui-label-select a::-webkit-scrollbar-track{ background-color: #f1f1f1;}
                .xui-label-select a::-webkit-scrollbar-thumb{ background-color: #666666;}
                .xui-label-select label{ display: block; text-indent: 20px;}
                .xui-label-select label:hover{ background-color: #f5f5f5; cursor: pointer;}
                .select-active{ z-index: 600;}
                .select-active i{ background-position: 0 0;}
                .select-active a{ display: block;}
                .select-readonly{ background-color: #f5f5f5; border: #c6c6c6 solid 1px !important;}
            </xmp>
            <xmp>
                @import "_root";
                @charset "utf-8";
                @img: '../images';
                @select_h: 32px;
                .xui-label-select { display: inline-block; cursor: pointer; .height(@select_h); .bor(#d0d0d0); .align;
                width: 148px; position: relative; text-align: left;white-space: nowrap;
                .s-unit { float: right; padding: 0 10px; .height(@select_h); border-left: #e9e9e9 solid 1px; text-align:
                center }
                i { width: 7px; height: 4px; float: right; background: url('@{img}/icon_01.png') 0 0 no-repeat;
                margin-top: (-4+@select_h)/2; margin-right: 12px; }
                span { color: #333333; margin-left: 20px; display: inline-block; text-overflow: ellipsis; overflow:
                hidden; white-space: nowrap; }
                a { display: none; line-height: @select_h; max-height: @select_h*6; overflow-y: scroll; width: 100%;
                position: absolute; top: @select_h; left: -1px; .bor(#d0d0d0); background-color: white;
                &:hover { color: #333; }
                &::-webkit-scrollbar { width: 2px; }
                &::-webkit-scrollbar-track { background-color: #f1f1f1; }
                &::-webkit-scrollbar-thumb { background-color: #666666; }
                }
                label { display: block; text-indent: 20px;
                &:hover { background-color: #f5f5f5; cursor: pointer; }
                }
                }

                .select-active { z-index: 600;
                i { background-position: 0 0; }
                a { display: block; }
                }

                .select-readonly { background-color: #f5f5f5; border: #c6c6c6 solid 1px !important }
            </xmp>
            <xmp>
                <label class="xui-label-select city-1" data-val="003">
                    <strong class="s-unit">省</strong><i></i><span>杭州</span>
                    <a>
                        <label data-val="003">杭州</label>
                    </a>
                </label>
            </xmp>
        </div>
    </div>
    <h3>示例：</h3>
    <div class="pre-box pre-edit-pager" contenteditable="false">
        <pre class="ex-1">
        let temList = [{id: -1, text: "---请选择---"}, {id: 1, text: "男"}, {id: 0, text: "女"}];
        let mSelect = $(".m-select-1").selectToggle(
            {
                id: "id", // 列表key
                text: "text", // 列表val
                list: temList,
                click: function (item) {
                    //console.log(item, mSelect.getSelectItem())
                }
            });
        </pre>
    </div>

    <div class="dome-box">
        <label class="xui-label-select m-select-1">
            <i></i><span>111</span><a></a>
        </label>
    </div>
    <h3>返回值：</h3>
    <div class="plist-box">
        <p>
            <span>reset<em>&lt;function(list, isNext, option)&gt;</em>：</span><label>list：数据；isNext：是否在数据更新后立即触发click事件；option:配置，会合并到当前option里</label>
        </p>
        <p>
            <span>getSelectItem<em>&lt;function()&gt;</em>：</span><label>返回当前select选中项</label>
        </p>
    </div>
    <h3 style="margin-top: 10px;">级联示例：</h3>
    <div class="pre-box">
        <pre>
        //模拟数据
        function listToObject(list) {
            let arr=[];
            list.forEach(function (el,idx) {
                arr.push({id:idx,text:el})
            });
            return arr;
        }
        let privoce = $(".city-1").selectToggle(
            {
                id: "id", // 列表key
                text: "text", // 列表val
                list: listToObject(dsy.Items["0"]),
                click: function (item) {
                    //console.log(item, privoce.getSelectItem())
                    city.reset(listToObject(dsy.Items["0_" + item.val]), true);
                }
            });

        let city = $(".city-2").selectToggle(
            {
                id: "id", // 列表key
                text: "text", // 列表val
                list: listToObject(dsy.Items["0_0"]),
                click: function (item) {
                    //console.log(item, city.getSelectItem())
                    area.reset(listToObject(dsy.Items["0_" + item.val + "_0"]));
                }
            });

        let area = $(".city-3").selectToggle(
            {
                id: "id", // 列表key
                text: "text", // 列表val
                list: listToObject(dsy.Items["0_0_0"]),
                click: function (item) {
                    //console.log(item, area.getSelectItem())
                }
            });
        </pre>
    </div>
    <div class="dome-box">
        <label class="xui-label-select city-1" data-val="003">
            <strong class="s-unit">省</strong><i></i><span>杭州</span>
            <a>
                <label data-val="003">杭州</label>
            </a>
        </label>
        <label class="xui-label-select city-2" data-val="003">
            <strong class="s-unit">市</strong><i></i><span>杭州</span>
            <a>
                <label data-val="003">杭州</label>
            </a>
        </label>
        <label class="xui-label-select city-3" data-val="003">
            <strong class="s-unit">区</strong><i></i><span>杭州</span>
            <a>
                <label data-val="003">杭州</label>
            </a>
        </label>
    </div>
    <h3 style="margin-top: 10px;">初始值示例：</h3>
    <div class="pre-box">
        <pre>
            let temList = [{id: -1, text: "---请选择---"}, {id: 1, text: "男"}, {id: 0, text: "女"}];
            let mSelect2 = $(".m-select-2").selectToggle(
            {
                id: "id",
                text: "text",
                list:temList,
                selectItem:temList[2],
                click: function (item) {
                    //console.log(item, mSelect2.getSelectItem())
                }
            });
        </pre>
    </div>
    <div class="dome-box" style="padding-bottom: 100px;">
        <label class="xui-label-select m-select-2">
            <i></i><span>222</span><a></a>
        </label>
    </div>

</div>
<script src="../../js/pre.js"></script>
<script>

    //模拟数据
    function listToObject(list) {
        let arr = [];
        list.forEach(function (el, idx) {
            arr.push({id: idx, text: el})
        });
        return arr;
    }

    $(function () {
        let temList = [{id: -1, text: "---请选择---"}, {id: 1, text: "男"}, {id: 0, text: "女"}];
        let mSelect = $(".m-select-1").selectToggle(
            {
                id: "id", // 列表key
                text: "text", // 列表val
                list: temList,
                click: function (item) {
                    //console.log(item, mSelect.getSelectItem())
                }
            }
        );
        let mSelect2 = $(".m-select-2").selectToggle(
            {
                id: "id", // 列表key
                text: "text", // 列表val
                list: temList,
                selectItem: temList[2],
                click: function (item) {
                    //console.log(item, mSelect2.getSelectItem())
                }
            }
        );
        let privoce = $(".city-1").selectToggle(
            {
                id: "id", // 列表key
                text: "text", // 列表val
                list: listToObject(dsy.Items["0"]),
                click: function (item) {
                    //console.log(item, privoce.getSelectItem())
                    city.reset(listToObject(dsy.Items["0_" + item.val]), true);
                }
            }
        );

        let city = $(".city-2").selectToggle(
            {
                id: "id", // 列表key
                text: "text", // 列表val
                list: listToObject(dsy.Items["0_0"]),
                click: function (item) {
                    //console.log(item, city.getSelectItem())
                    area.reset(listToObject(dsy.Items["0_" + item.val + "_0"]));
                }
            });

        let area = $(".city-3").selectToggle(
            {
                id: "id", // 列表key
                text: "text", // 列表val
                list: listToObject(dsy.Items["0_0_0"]),
                click: function (item) {
                    //console.log(item, area.getSelectItem())
                }
            }
        );
    })


</script>
</body>
</html>